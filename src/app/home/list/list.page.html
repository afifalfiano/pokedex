<app-px-ion-header>
  <ion-title>{{title()}}</ion-title>
</app-px-ion-header>

<ion-content [fullscreen]="true">
  <app-px-ion-refresher [eventRefresh]="getPokemonList.bind(this)"></app-px-ion-refresher>

  <ion-searchbar animated="true" placeholder="Search pokemon" (ionInput)="onSearch($event)"></ion-searchbar>

  <ion-loading [isOpen]="isLoading()" message="Loading..." [duration]="1000" spinner="circles"></ion-loading>

  @if (!isLoading() && total() > 0) {
  <ion-list>
    @for (pokemon of data().results | filterSearch: keywordSearch() :'name'; track $index; let index = $index) {
    <ion-item>
      <ion-avatar slot="start">
        <img [src]="urlImage + index + Image.png" alt="avatar" />
      </ion-avatar>
      <ion-label [routerLink]="['/', 'list', pokemon.name]">{{ pokemon.name }}</ion-label>
      <ion-button [id]="triggerToast()" color="danger" shape="round" (click)="onRemoveFavorite(pokemon)" (onKeyPress)="onRemoveFavorite(pokemon)" *ngIf="pokemon.isAddedFavorite">
        <ion-icon slot="icon-only" style="color: #FFF" name="trash"></ion-icon>
      </ion-button>
      <ion-button [id]="triggerToast()" shape="round" (click)="onAddFavorite(pokemon)" (onKeyPress)="onAddFavorite(pokemon)" *ngIf="!pokemon.isAddedFavorite">
        <ion-icon slot="icon-only" style="color: #FFF" name="heart"></ion-icon>
      </ion-button>
    </ion-item>
    }
  </ion-list>

  <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)">
    <ion-infinite-scroll-content loadingText="Please wait..." loadingSpinner="bubbles"></ion-infinite-scroll-content>
  </ion-infinite-scroll>
  <app-px-ion-toast [trigger]="triggerToast()" [message]="messageToast()" [duration]="durationToast()"></app-px-ion-toast>
  }

  @if(!isLoading() && total() === 0) {
    <ion-text color="white">
      <p class="ion-padding">{{COPY.NOT_FOUND_HOME}}</p>
    </ion-text>
  }
</ion-content>

